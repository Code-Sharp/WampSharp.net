<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=alternate href=/index.xml type=application/rss+xml title=WampSharp><link rel=icon href=https://wampsharp.net/favicon.ico><title>WampSharp v1.2.2.8-beta release notes - WampSharp</title><link rel=stylesheet href=https://wampsharp.net/css/highlight/github.css><link rel=stylesheet href=https://wampsharp.net/css/bootstrap.min.css><link rel=stylesheet href=https://wampsharp.net/css/bootstrap-theme.min.css><link rel=stylesheet href=https://wampsharp.net/css/theme.css><link rel=stylesheet href=https://wampsharp.net/css/bootie-docs.css><link rel=stylesheet href=https://wampsharp.net/css/site.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/docsearch.js@v2.6.3/dist/cdn/docsearch.min.css></head><body role=document><nav class="navbar navbar-inverse navbar-fixed-top"><div class=container><div class=navbar-header><button type=button class="navbar-toggle collapsed" data-toggle=collapse data-target=#navbar aria-expanded=false aria-controls=navbar>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span><span class=icon-bar></span><span class=icon-bar></span></button>
<a class=navbar-brand href=https://wampsharp.net/>WampSharp</a></div><div id=navbar class="navbar-collapse collapse"><ul class="nav navbar-nav"><li><a href=https://wampsharp.net/>Home</a></li><li class=dropdown><a href=# class=dropdown-toggle data-toggle=dropdown role=button aria-expanded=false>Categories<span class=caret></span></a><ul class=dropdown-menu role=menu><li><a href=https://wampsharp.net/categories/authentication>Authentication</a></li><li><a href=https://wampsharp.net/categories/callee>Callee</a></li><li><a href=https://wampsharp.net/categories/caller>Caller</a></li><li><a href=https://wampsharp.net/categories/client>Client</a></li><li><a href=https://wampsharp.net/categories/getting-started>Getting-Started</a></li><li><a href=https://wampsharp.net/categories/publisher>Publisher</a></li><li><a href=https://wampsharp.net/categories/release-notes>Release-Notes</a></li><li><a href=https://wampsharp.net/categories/roadmap>Roadmap</a></li><li><a href=https://wampsharp.net/categories/router>Router</a></li><li><a href=https://wampsharp.net/categories/subscriber>Subscriber</a></li><li><a href=https://wampsharp.net/categories/wamp1>Wamp1</a></li></ul></li></ul><form class="navbar-form navbar-left" role=search><div class="input-group doc-search-form"><input type=text id=as_q class="search-query doc-search-input-text" placeholder="Search Site"></div></form></div></div></nav><div class=container><div class=row><div class="col-sm-8 doc-main"><main role=main><article><a id=title></a><h1 class=doc-entry-title>WampSharp v1.2.2.8-beta release notes</h1><div class=doc-entry-meta><span><time datetime=2015-06-13>June 13, 2015</time></span></div><section><h2 id=breaking-changes>Breaking changes</h2><h3 id=library-split-up>Library split up</h3><h4 id=wampsharpdefault-split-up>WampSharp.Default split up</h4><p>WampSharp.Default.dll has been split up into a couple of libraries. This allows you to consume only the libraries you are interested in:</p><ul><li>WampSharp.Fleck - This NuGet package contains WampSharp implementation of a WebSocket transport using <a href=https://github.com/statianzo/Fleck>Fleck</a>.</li><li>WampSharp.NewtonsoftJson - This NuGet package contains WampSharp support for Json serialization using <a href=http://www.newtonsoft.com/json>Newtonsoft Json</a></li><li>WampSharp.NewtonsoftMsgpack - This NuGet package contains WampSharp support for MsgPack serialization using <a href=https://github.com/Code-Sharp/Newtonsoft.Msgpack>Newtonsoft.Msgpack</a> (which internally uses <a href=http://cli.msgpack.org/>msgpack-cli</a> and <a href=http://www.newtonsoft.com/json>Newtonsoft Json</a>)</li><li>WampSharp.WebSocket4Net - This NuGet package contains WampSharp implementation of a WebSocket client using <a href=https://github.com/kerryjiang/WebSocket4Net>WebSocket4Net</a>.</li></ul><p>In addition the following packages exist:</p><ul><li>WampSharp.Default.Client - adds DefaultWampChannelFactory which uses WampSharp.WebSocket4Net, WampSharp.NewtonsoftJson and WampSharp.NewtonsoftMsgpack</li><li>WampSharp.Default.Router - adds DefaultWampHost which uses WampSharp.Fleck, WampSharp.NewtonsoftJson and WampSharp.NewtonsoftMsgpack.</li><li>WampSharp.Default - references both WampSharp.Default.Client and WampSharp.Default.Router.</li></ul><blockquote><p>Note: You don&rsquo;t have to consume the WampSharp.Default.Client/WampSharp.Default.Router libraries, you can always use directly <a href=https://wampsharp.net/wamp2/client/wampchannel/>WampChannel</a> or <a href=https://wampsharp.net/wamp2/router/wamphost/>WampHost</a> if you&rsquo;re interested only in some of the dependencies.</p></blockquote><h4 id=wampv1-split-up>WAMPv1 split up</h4><p>From this version, WAMPv1 support has been moved to a dedicated dll name WampSharp.WAMP1.dll. The types DefaultWampHost, DefaultWampCraHost and DefaultWampChannelFactory (and some extension methods of IWampChannelFactory) are located in WampSharp.WAMP1.Default.dll.</p><p>In order to update a WAMP1 application to this version, please uninstall WampSharp.Default and install WampSharp.WAMP1.Default instead.</p><p>Please also note that <a href=https://groups.google.com/forum/#!msg/autobahnws/k-Jo8NnFtjA/qxnmFp2qGkMJ>WAMPv1 is deprecated</a>, and you&rsquo;re encouraged to upgrade your application to WAMPv2.</p><h2 id=new-features>New features</h2><h3 id=portable-class-library-support>Portable Class Library Support</h3><p>From this version, Portable Class Library is supported (to be precise, Windows Phone 8.1 and Windows 8.1 platforms).</p><p>In order to use WampSharp in these platforms, simply install WampSharp.Default.Client and use DefaultWampChannelFactory as usual. Note that currently only Json serialization is supported in these platforms.</p><p>The WampSharp implementation of a WebSocket client for these platforms is located in WampSharp.Windows and is called MessageWebSocketTextConnection (based on the <a href=https://msdn.microsoft.com/library/windows/apps/br226842>MessageWebSocket class</a>).</p><h3 id=logging-support>Logging support</h3><p>From this version, some logs are written by the library. Logging is supported by the <a href=https://github.com/damianh/LibLog>LibLog</a> project. In order to enable logs, just install your favorite logging library that <a href=https://github.com/damianh/LibLog/wiki>LibLog supports</a>, and configure it. Logs will be written to &ldquo;WampSharp.&rdquo; prefixed loggers automatically.</p><p>This is an initial logs works. You are welcome to request some other logs from this library - please comment <a href=https://github.com/Code-Sharp/WampSharp/issues/6>here</a> about logs that you are interested in.</p><h3 id=wampchannelreconnector>WampChannelReconnector</h3><p>Available from WampSharp v1.2.1.7-beta, defines a mechanism for reconnecting to a remote router.</p><p>In order to use it, create an instance of WampChannelReconnector, and pass to it a delegate that will be triggered everytime a channel gets connected to the remote router.</p><p>Example:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>async</span> Task Run()
{
    DefaultWampChannelFactory factory = <span style=color:#66d9ef>new</span> DefaultWampChannelFactory();

    <span style=color:#66d9ef>string</span> address = <span style=color:#e6db74>&#34;ws://localhost:8080/ws&#34;</span>;

    MySubscriber mySubscriber = <span style=color:#66d9ef>new</span> MySubscriber();

    IWampChannel channel =
        factory.CreateJsonChannel(address, <span style=color:#e6db74>&#34;realm1&#34;</span>);

    Func&lt;Task&gt; connect = <span style=color:#66d9ef>async</span> () =&gt;
    {
        <span style=color:#66d9ef>await</span> channel.Open();

        <span style=color:#66d9ef>var</span> subscriptionTask =
            channel.RealmProxy.Services.RegisterSubscriber(mySubscriber);

        <span style=color:#66d9ef>var</span> asyncDisposable = <span style=color:#66d9ef>await</span> subscriptionTask;
    };

    WampChannelReconnector reconnector =
        <span style=color:#66d9ef>new</span> WampChannelReconnector(channel, connect);

    reconnector.Start();
}

</code></pre></div><h3 id=wamp-cra-authentication>WAMP-CRA Authentication</h3><p><a href=http://crossbar.io/docs/WAMP-CRA-Authentication/>WAMP-CRA</a> client side authentication is now supported. In order to use it, instantiate a new instance of WampCraAuthenticator and pass it to the channel factory.
Example:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>async</span> Task Run()
{
    DefaultWampChannelFactory channelFactory = <span style=color:#66d9ef>new</span> DefaultWampChannelFactory();

    IWampClientAuthenticator authenticator;

    <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>false</span>)
    {
        authenticator = <span style=color:#66d9ef>new</span> WampCraClientAuthenticator(authenticationId: <span style=color:#e6db74>&#34;joe&#34;</span>, authenticationKey: <span style=color:#e6db74>&#34;secret2&#34;</span>);
    }
    <span style=color:#66d9ef>else</span>
    {
        authenticator =
            <span style=color:#66d9ef>new</span> WampCraClientAuthenticator(authenticationId: <span style=color:#e6db74>&#34;peter&#34;</span>, secret: <span style=color:#e6db74>&#34;secret1&#34;</span>, salt: <span style=color:#e6db74>&#34;salt123&#34;</span>, iterations: <span style=color:#ae81ff>100</span>, keyLen: <span style=color:#ae81ff>16</span>);
    }

    IWampChannel channel =
        channelFactory.CreateJsonChannel(<span style=color:#e6db74>&#34;ws://127.0.0.1:8080/ws&#34;</span>,
            <span style=color:#e6db74>&#34;realm1&#34;</span>,
            authenticator);

    channel.RealmProxy.Monitor.ConnectionEstablished +=
        (sender, args) =&gt;
        {
            Console.WriteLine(<span style=color:#e6db74>&#34;connected session with ID &#34;</span> + args.SessionId);

            <span style=color:#66d9ef>dynamic</span> details = args.Details.Deserialize&lt;<span style=color:#66d9ef>dynamic</span>&gt;();

            Console.WriteLine(<span style=color:#e6db74>&#34;authenticated using method &#39;{0}&#39; and provider &#39;{1}&#39;&#34;</span>, details.authmethod,
                              details.authprovider);

            Console.WriteLine(<span style=color:#e6db74>&#34;authenticated with authid &#39;{0}&#39; and authrole &#39;{1}&#39;&#34;</span>, details.authid,
                              details.authrole);
        };

    channel.RealmProxy.Monitor.ConnectionBroken += (sender, args) =&gt;
    {
        <span style=color:#66d9ef>dynamic</span> details = args.Details.Deserialize&lt;<span style=color:#66d9ef>dynamic</span>&gt;();
        Console.WriteLine(<span style=color:#e6db74>&#34;disconnected &#34;</span> + args.Reason + <span style=color:#e6db74>&#34; &#34;</span> + details.reason + details);
    };

    IWampRealmProxy realmProxy = channel.RealmProxy;

    <span style=color:#66d9ef>await</span> channel.Open().ConfigureAwait(<span style=color:#66d9ef>false</span>);

    <span style=color:#75715e>// call a procedure we are allowed to call (so this should succeed)
</span><span style=color:#75715e></span>    <span style=color:#75715e>//
</span><span style=color:#75715e></span>    IAdd2Service proxy = realmProxy.Services.GetCalleeProxy&lt;IAdd2Service&gt;();

    <span style=color:#66d9ef>try</span>
    {
        <span style=color:#66d9ef>var</span> five = <span style=color:#66d9ef>await</span> proxy.Add2Async(<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>)
            .ConfigureAwait(<span style=color:#66d9ef>false</span>);

        Console.WriteLine(<span style=color:#e6db74>&#34;call result {0}&#34;</span>, five);
    }
    <span style=color:#66d9ef>catch</span> (Exception e)
    {
        Console.WriteLine(<span style=color:#e6db74>&#34;call error {0}&#34;</span>, e);
    }

    <span style=color:#75715e>// (try to) register a procedure where we are not allowed to (so this should fail)
</span><span style=color:#75715e></span>    <span style=color:#75715e>//
</span><span style=color:#75715e></span>    Mul2Service service = <span style=color:#66d9ef>new</span> Mul2Service();

    <span style=color:#66d9ef>try</span>
    {
        <span style=color:#66d9ef>await</span> realmProxy.Services.RegisterCallee(service)
            .ConfigureAwait(<span style=color:#66d9ef>false</span>);

        Console.WriteLine(<span style=color:#e6db74>&#34;huh, function registered!&#34;</span>);
    }
    <span style=color:#66d9ef>catch</span> (WampException ex)
    {
        Console.WriteLine(<span style=color:#e6db74>&#34;registration failed - this is expected: &#34;</span> + ex.ErrorUri);
    }

    <span style=color:#75715e>// (try to) publish to some topics
</span><span style=color:#75715e></span>    <span style=color:#75715e>//
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>string</span>[] topics = {
        <span style=color:#e6db74>&#34;com.example.topic1&#34;</span>,
        <span style=color:#e6db74>&#34;com.example.topic2&#34;</span>,
        <span style=color:#e6db74>&#34;com.foobar.topic1&#34;</span>,
        <span style=color:#e6db74>&#34;com.foobar.topic2&#34;</span>
    };


    <span style=color:#66d9ef>foreach</span> (<span style=color:#66d9ef>string</span> topic <span style=color:#66d9ef>in</span> topics)
    {
        IWampTopicProxy topicProxy = realmProxy.TopicContainer.GetTopicByUri(topic);

        <span style=color:#66d9ef>try</span>
        {
            <span style=color:#66d9ef>await</span> topicProxy.Publish(<span style=color:#66d9ef>new</span> PublishOptions() { Acknowledge = <span style=color:#66d9ef>true</span> })
                .ConfigureAwait(<span style=color:#66d9ef>false</span>);

            Console.WriteLine(<span style=color:#e6db74>&#34;event published to topic &#34;</span> + topic);
        }
        <span style=color:#66d9ef>catch</span> (WampException ex)
        {
            Console.WriteLine(<span style=color:#e6db74>&#34;publication to topic &#34;</span> + topic + <span style=color:#e6db74>&#34; failed: &#34;</span> + ex.ErrorUri);
        }
    }
}


<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> IAdd2Service
{
<span style=color:#a6e22e>    [WampProcedure(&#34;com.example.add2&#34;)]</span>
    Task&lt;<span style=color:#66d9ef>int</span>&gt; Add2Async(<span style=color:#66d9ef>int</span> x, <span style=color:#66d9ef>int</span> y);
}

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Mul2Service</span>
{
<span style=color:#a6e22e>    [WampProcedure(&#34;com.example.mul2&#34;)]</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> Multiply2(<span style=color:#66d9ef>int</span> x, <span style=color:#66d9ef>int</span> y)
    {
        <span style=color:#66d9ef>return</span> x*y;
    }
}
</code></pre></div><blockquote><p>Note: The sample is based on <a href=https://github.com/crossbario/crossbar-examples/tree/master/authentication/wampcra/static>this</a> AutobahnJS sample</p></blockquote><h3 id=pattern-based-subscriptions>Pattern based subscriptions</h3><p>This version has support for <a href=http://crossbar.io/docs/Pattern-Based-Subscriptions/>pattern based subscriptions</a>, for both router side and client side.</p><p>In order to use it from router side, you need to do nothing - WampSharp router implementation supports pattern based subscriptions. If you want to publish events from the router side so that they will be sent for all matching subscriptions, use one of the Realm Services publication methods, or use TopicContainer.Publish method. (IWampTopic methods publish to a specific subscription and therefore ignore other possible matching subscriptions)</p><p>In order to use it from client side, pass a SubscribeOptions with Match = &ldquo;exact&rdquo;/&ldquo;prefix&rdquo;/&ldquo;wildcard&rdquo; depending on your criteria:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>async</span> Task Run()
{
    DefaultWampChannelFactory channelFactory = <span style=color:#66d9ef>new</span> DefaultWampChannelFactory();

    IWampChannel channel =
        channelFactory.CreateJsonChannel(<span style=color:#e6db74>&#34;ws://127.0.0.1:8080/ws&#34;</span>,
            <span style=color:#e6db74>&#34;realm1&#34;</span>);

    <span style=color:#66d9ef>await</span> channel.Open().ConfigureAwait(<span style=color:#66d9ef>false</span>);

    <span style=color:#66d9ef>await</span> channel.RealmProxy.Services.RegisterSubscriber(<span style=color:#66d9ef>new</span> Subscriber1())
        .ConfigureAwait(<span style=color:#66d9ef>false</span>);

    <span style=color:#66d9ef>await</span> channel.RealmProxy.Services.RegisterSubscriber
        (<span style=color:#66d9ef>new</span> Subscriber2(),
         <span style=color:#66d9ef>new</span> SubscriberRegistrationInterceptor(<span style=color:#66d9ef>new</span> SubscribeOptions
         {
             Match = <span style=color:#e6db74>&#34;prefix&#34;</span>
         }))
         .ConfigureAwait(<span style=color:#66d9ef>false</span>);

    <span style=color:#66d9ef>await</span> channel.RealmProxy.Services.RegisterSubscriber
        (<span style=color:#66d9ef>new</span> Subscriber3(),
         <span style=color:#66d9ef>new</span> SubscriberRegistrationInterceptor(<span style=color:#66d9ef>new</span> SubscribeOptions
         {
             Match = <span style=color:#e6db74>&#34;wildcard&#34;</span>
         }))
         .ConfigureAwait(<span style=color:#66d9ef>false</span>);
}

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Subscriber1</span>
{
<span style=color:#a6e22e>    [WampTopic(&#34;com.example.topic1&#34;)]</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> Handler1(<span style=color:#66d9ef>string</span> message)
    {
        Console.WriteLine(<span style=color:#e6db74>&#34;handler1: msg = &#39;{0}&#39;, topic = &#39;{1}&#39;&#34;</span>, message,
                          WampEventContext.Current.EventDetails.Topic);
    }
}

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Subscriber2</span>
{
<span style=color:#a6e22e>    [WampTopic(&#34;com.example&#34;)]</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> Handler2(<span style=color:#66d9ef>string</span> message)
    {
        Console.WriteLine(<span style=color:#e6db74>&#34;handler2: msg = &#39;{0}&#39;, topic = &#39;{1}&#39;&#34;</span>, message,
                          WampEventContext.Current.EventDetails.Topic);
    }             
}

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Subscriber3</span>
{
<span style=color:#a6e22e>    [WampTopic(&#34;com..topic1&#34;)]</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> Handler3(<span style=color:#66d9ef>string</span> message)
    {
        Console.WriteLine(<span style=color:#e6db74>&#34;handler3: msg = &#39;{0}&#39;, topic = &#39;{1}&#39;&#34;</span>, message,
                          WampEventContext.Current.EventDetails.Topic);
    }             
}
</code></pre></div><blockquote><p>Note: this sample is based on <a href=https://github.com/crossbario/crossbarexamples/tree/master/patternsubs>this</a> Autobahn sample</p></blockquote><h3 id=shared-registrations>Shared registrations</h3><p>From this version <a href=http://crossbar.io/docs/Shared-Registrations/>shared registrations</a> are supported both on router and client sides.</p><p>In order to use shared registrations, pass to the Register methods, RegisterOptions with a desired Invoke (the policy to be used). The possible options are: single/first/last/random/roundrobin.</p><p>Example:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>async</span> Task Run()
{
    DefaultWampChannelFactory channelFactory = <span style=color:#66d9ef>new</span> DefaultWampChannelFactory();

    IWampChannel channel =
        channelFactory.CreateJsonChannel
            (<span style=color:#e6db74>&#34;ws://127.0.0.1:8080/ws&#34;</span>,
             <span style=color:#e6db74>&#34;realm1&#34;</span>);

    TaskCompletionSource&lt;<span style=color:#66d9ef>string</span>&gt; identTask = <span style=color:#66d9ef>new</span> TaskCompletionSource&lt;<span style=color:#66d9ef>string</span>&gt;();

    channel.RealmProxy.Monitor.ConnectionEstablished += (sender, args) =&gt;
    {
        <span style=color:#66d9ef>string</span> ident =
            <span style=color:#66d9ef>string</span>.Format(<span style=color:#e6db74>&#34;MyComponent (PID {0}, Session {1})&#34;</span>,
                          Process.GetCurrentProcess().Id,
                          args.SessionId);

        identTask.SetResult(ident);
    };

    <span style=color:#66d9ef>await</span> channel.Open().ConfigureAwait(<span style=color:#66d9ef>false</span>);

    <span style=color:#66d9ef>string</span> identValue = <span style=color:#66d9ef>await</span> identTask.Task;

    <span style=color:#66d9ef>await</span> channel.RealmProxy.Services.RegisterCallee(<span style=color:#66d9ef>new</span> MyComponent(identValue),
        <span style=color:#66d9ef>new</span> CalleeRegistrationInterceptor(<span style=color:#66d9ef>new</span> RegisterOptions()
        {
            Invoke = <span style=color:#e6db74>&#34;roundrobin&#34;</span>
        }))
        .ConfigureAwait(<span style=color:#66d9ef>false</span>);
}

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MyComponent</span>
{
    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>readonly</span> <span style=color:#66d9ef>string</span> mIdent;

    <span style=color:#66d9ef>public</span> MyComponent(<span style=color:#66d9ef>string</span> ident)
    {
        mIdent = ident;
    }
<span style=color:#a6e22e>
</span><span style=color:#a6e22e>    [WampProcedure(&#34;com.example.add2&#34;)]</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>object</span> Add2(<span style=color:#66d9ef>double</span> x, <span style=color:#66d9ef>double</span> y)
    {
        Console.WriteLine(<span style=color:#e6db74>&#34;add2 called on {0}&#34;</span>, mIdent);

        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span>
        {
            result = x + y,
            ident = mIdent
        };
    }
}
</code></pre></div><blockquote><p>Note: this sample is based on <a href=https://github.com/crossbario/crossbarexamples/tree/master/sharedregs>this</a> Autobahn sample</p></blockquote><h3 id=pattern-based-registrations>Pattern-based registrations</h3><p>From this version <a href=http://crossbar.io/docs/Pattern-Based-Registrations/>pattern-based registrations</a> are supported both on router and client sides.</p><p>In order to use pattern-based registrations, pass to the Register methods, RegisterOptions with a desired Match (the match pattern to be used). The possible options are: exact/prefix/wildcard.</p><p>Example:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>async</span> Task Run()
{
    DefaultWampChannelFactory channelFactory = <span style=color:#66d9ef>new</span> DefaultWampChannelFactory();

    IWampChannel channel =
        channelFactory.CreateJsonChannel(<span style=color:#e6db74>&#34;ws://127.0.0.1:8080/ws&#34;</span>,
            <span style=color:#e6db74>&#34;realm1&#34;</span>);

    <span style=color:#66d9ef>await</span> channel.Open().ConfigureAwait(<span style=color:#66d9ef>false</span>);

    <span style=color:#66d9ef>await</span> channel.RealmProxy.Services.RegisterCallee(<span style=color:#66d9ef>new</span> Callee1())
        .ConfigureAwait(<span style=color:#66d9ef>false</span>);

    <span style=color:#66d9ef>await</span> channel.RealmProxy.Services.RegisterCallee
        (<span style=color:#66d9ef>new</span> Callee2(),
         <span style=color:#66d9ef>new</span> CalleeRegistrationInterceptor(<span style=color:#66d9ef>new</span> RegisterOptions
         {
             Match = <span style=color:#e6db74>&#34;prefix&#34;</span>
         }))
         .ConfigureAwait(<span style=color:#66d9ef>false</span>);

    <span style=color:#66d9ef>await</span> channel.RealmProxy.Services.RegisterCallee
        (<span style=color:#66d9ef>new</span> Callee3(),
         <span style=color:#66d9ef>new</span> CalleeRegistrationInterceptor(<span style=color:#66d9ef>new</span> RegisterOptions
         {
             Match = <span style=color:#e6db74>&#34;wildcard&#34;</span>
         }))
         .ConfigureAwait(<span style=color:#66d9ef>false</span>);
}

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Callee1</span>
{
<span style=color:#a6e22e>    [WampProcedure(&#34;com.example.procedure1&#34;)]</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> Endpoint1(<span style=color:#66d9ef>string</span> message)
    {
        Console.WriteLine(<span style=color:#e6db74>&#34;endpoint1: msg = &#39;{0}&#39;, procedure = &#39;{1}&#39;&#34;</span>, message,
                          WampInvocationContext.Current.InvocationDetails.Procedure);
    }
}

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Callee2</span>
{
<span style=color:#a6e22e>    [WampProcedure(&#34;com.example&#34;)]</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> Endpoint2(<span style=color:#66d9ef>string</span> message)
    {
        Console.WriteLine(<span style=color:#e6db74>&#34;endpoint2: msg = &#39;{0}&#39;, procedure = &#39;{1}&#39;&#34;</span>, message,
                          WampInvocationContext.Current.InvocationDetails.Procedure);
    }             
}

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Callee3</span>
{
<span style=color:#a6e22e>    [WampProcedure(&#34;com..procedure1&#34;)]</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> Endpoint3(<span style=color:#66d9ef>string</span> message)
    {
        Console.WriteLine(<span style=color:#e6db74>&#34;endpoint3: msg = &#39;{0}&#39;, procedure = &#39;{1}&#39;&#34;</span>, message,
                          WampInvocationContext.Current.InvocationDetails.Procedure);
    }             
}

</code></pre></div><blockquote><p>Note: this sample is based on <a href=https://github.com/crossbario/crossbarexamples/tree/master/patternregs>this</a> Autobahn sample</p></blockquote><h2 id=internal-changes>Internal Changes</h2><h3 id=performance-improvements>Performance improvements</h3><p>This version introduces some optimizations:</p><ul><li>Reflection optimizations - avoiding calling MethodInfo.Invoke using expression delegate compilation and other techniques - mostly in Reflection based roles, such as Reflection based callee, Reflection based subscriber, callee proxy.</li><li>Serialization optimizations - serializing entire WampMessages instead of serializing each element of the array separately.</li><li>Pub/Sub subscriber black and whitelisting, publisher exclusion calculation optimizations using HashSets.</li></ul><h3 id=bug-fixes>Bug fixes</h3><p>This version contains a couple of bug fixes, mainly <a href=https://github.com/Code-Sharp/WampSharp/issues/67>SUBSCRIBE fixes</a>.</p></section></article></main></div><div class="col-sm-3 col-sm-offset-1 doc-sidebar"><div id=sidebar><div class=sidebar-module><div class=sidebar-toc><h4 class=sidebar-heading>Table of Contents</h4><ul><li><strong><a href=#title>WampSharp v1.2.2.8-beta release notes</a></strong></li></ul><nav id=TableOfContents><ul><li><a href=#breaking-changes>Breaking changes</a><ul><li><a href=#library-split-up>Library split up</a></li></ul></li><li><a href=#new-features>New features</a><ul><li><a href=#portable-class-library-support>Portable Class Library Support</a></li><li><a href=#logging-support>Logging support</a></li><li><a href=#wampchannelreconnector>WampChannelReconnector</a></li><li><a href=#wamp-cra-authentication>WAMP-CRA Authentication</a></li><li><a href=#pattern-based-subscriptions>Pattern based subscriptions</a></li><li><a href=#shared-registrations>Shared registrations</a></li><li><a href=#pattern-based-registrations>Pattern-based registrations</a></li></ul></li><li><a href=#internal-changes>Internal Changes</a><ul><li><a href=#performance-improvements>Performance improvements</a></li><li><a href=#bug-fixes>Bug fixes</a></li></ul></li></ul></nav></div></div><div class=sidebar-module><h4 class=sidebar-heading>Pages in Categories</h4><ul class=sidebar-category-list><li><a href=https://wampsharp.net/categories/authentication><span class=doc-list-category>Authentication</span></a><ul><li><a href=/wamp2/client/client-side-authentication/>Client-side authentication</a></li><li><a href=/wamp2/router/cookie-based-router-side-authentication/>Cookie based router-side authentication</a></li><li><a href=/wamp2/router/router-side-authentication/>Router-side authentication</a></li><li><a href=/wamp2/client/wamp-cra-client-side-authentication/>WAMP-CRA client side authentication</a></li><li><a href=/wamp2/router/wamp-cra-router-side-authentication/>WAMP-CRA router-side authentication</a></li></ul></li><li><a href=https://wampsharp.net/categories/callee><span class=doc-list-category>Callee</span></a><ul><li><a href=/wamp2/roles/callee/getting-started-with-callee/>Getting started with Callee</a></li><li><a href=/wamp2/roles/callee/raw-callee/>Raw Callee</a></li><li><a href=/wamp2/roles/callee/reflection-based-callee/>Reflection-based Callee</a></li></ul></li><li><a href=https://wampsharp.net/categories/caller><span class=doc-list-category>Caller</span></a><ul><li><a href=/wamp2/roles/caller/getting-started-with-caller/>Getting started with Caller</a></li><li><a href=/wamp2/roles/caller/raw-caller/>Raw Caller</a></li><li><a href=/wamp2/roles/caller/reflection-based-caller/>Reflection-based Caller</a></li></ul></li><li><a href=https://wampsharp.net/categories/client><span class=doc-list-category>Client</span></a><ul><li><a href=/wamp2/router/transports/rawsocket/>RawSocket transport</a></li><li><a href=/wamp2/client/client-side-authentication/>Client-side authentication</a></li><li><a href=/wamp2/meta-api-service/>Meta-api descriptor service</a></li><li><a href=/wamp2/testament-service/>Testament service</a></li><li><a href=/wamp2/client/wamp-cra-client-side-authentication/>WAMP-CRA client side authentication</a></li><li><a href=/wamp2/client/wampchannel/>WampChannel</a></li><li><a href=/wamp2/client/wampchannelreconnector/>WampChannelReconnector</a></li></ul></li><li><a href=https://wampsharp.net/categories/getting-started><span class=doc-list-category>Getting-Started</span></a><ul><li><a href=/wamp2/roles/callee/getting-started-with-callee/>Getting started with Callee</a></li><li><a href=/wamp2/roles/caller/getting-started-with-caller/>Getting started with Caller</a></li><li><a href=/wamp2/roles/publisher/getting-started-with-publisher/>Getting started with Publisher</a></li><li><a href=/wamp2/roles/subscriber/getting-started-with-subscriber/>Getting started with Subscriber</a></li><li><a href=/wamp2/getting-started-with-wampv2/>Getting started with WAMPv2</a></li></ul></li><li><a href=https://wampsharp.net/categories/publisher><span class=doc-list-category>Publisher</span></a><ul><li><a href=/wamp2/roles/publisher/getting-started-with-publisher/>Getting started with Publisher</a></li><li><a href=/wamp2/roles/publisher/raw-publisher/>Raw Publisher</a></li><li><a href=/wamp2/roles/publisher/reflection-based-publisher/>Reflection-based Publisher</a></li><li><a href=/wamp2/roles/publisher/rx-based-publisher/>Rx-based Publisher</a></li></ul></li><li><a href=https://wampsharp.net/categories/release-notes><span class=doc-list-category>Release-Notes</span></a><ul><li><a href=/release-notes/wampsharp-v20.1.1-release-notes/>WampSharp v20.1.1 release notes</a></li><li><a href=/release-notes/wampsharp-v18.6.1-release-notes/>WampSharp v18.6.1 release notes</a></li><li><a href=/release-notes/wampsharp-v1.2.6.41-beta-release-notes/>WampSharp v1.2.6.41-beta release notes</a></li><li><a href=/release-notes/wampsharp-v1.2.5.21-beta-release-notes/>WampSharp v1.2.5.21-beta release notes</a></li><li><a href=/release-notes/wampsharp-v1.2.4.18-beta-release-notes/>WampSharp v1.2.4.18-beta release notes</a></li><li><a href=/release-notes/wampsharp-v1.2.3.12-beta-release-notes/>WampSharp v1.2.3.12-beta release notes</a></li><li><span class=active>WampSharp v1.2.2.8-beta release notes</span></li><li><a href=/release-notes/wampsharp-v1.2.1.6-beta-release-notes/>WampSharp v1.2.1.6-beta release notes</a></li></ul></li><li><a href=https://wampsharp.net/categories/roadmap><span class=doc-list-category>Roadmap</span></a><ul><li><a href=/roadmap/>Roadmap</a></li></ul></li><li><a href=https://wampsharp.net/categories/router><span class=doc-list-category>Router</span></a><ul><li><a href=/wamp2/router/transports/rawsocket/>RawSocket transport</a></li><li><a href=/wamp2/router/transports/websocket/>WebSocket transports</a></li><li><a href=/wamp2/router/cookie-based-router-side-authentication/>Cookie based router-side authentication</a></li><li><a href=/wamp2/meta-api-service/>Meta-api descriptor service</a></li><li><a href=/wamp2/router/router-side-authentication/>Router-side authentication</a></li><li><a href=/wamp2/testament-service/>Testament service</a></li><li><a href=/wamp2/router/wamp-cra-router-side-authentication/>WAMP-CRA router-side authentication</a></li><li><a href=/wamp2/router/wamphost/>WampHost</a></li></ul></li><li><a href=https://wampsharp.net/categories/subscriber><span class=doc-list-category>Subscriber</span></a><ul><li><a href=/wamp2/roles/subscriber/getting-started-with-subscriber/>Getting started with Subscriber</a></li><li><a href=/wamp2/roles/subscriber/raw-subscriber/>Raw Subscriber</a></li><li><a href=/wamp2/roles/subscriber/reflection-based-subscriber/>Reflection-based Subscriber</a></li><li><a href=/wamp2/roles/subscriber/rx-based-subscriber/>Rx-based Subscriber</a></li></ul></li><li><a href=https://wampsharp.net/categories/wamp1><span class=doc-list-category>Wamp1</span></a><ul><li><a href=/wamp1/getting-started-with-wampv1/>Getting started with WAMPv1</a></li><li><a href=/wamp1/getting-started-with-wampv1-client/>Getting started with WAMPv1 client</a></li><li><a href=/wamp1/notes-for-wampv1-users/>Notes for WAMP1 users</a></li><li><a href=/wamp1/server-pubsub-hosting-wampv1/>Server PubSub hosting (WAMPv1)</a></li><li><a href=/wamp1/server-rpc-hosting-wampv1/>Server RPC hosting (WAMPv1)</a></li></ul></li></ul></div><div class=sidebar-module><h4 class=sidebar-heading>Tags</h4><div class=tag-box><a class=tag-item href=https://wampsharp.net/tags/authentication>authentication</a>
<a class=tag-item href=https://wampsharp.net/tags/callee>callee</a>
<a class=tag-item href=https://wampsharp.net/tags/caller>caller</a>
<a class=tag-item href=https://wampsharp.net/tags/client>client</a>
<a class=tag-item href=https://wampsharp.net/tags/publisher>publisher</a>
<a class=tag-item href=https://wampsharp.net/tags/raw-api>raw-api</a>
<a class=tag-item href=https://wampsharp.net/tags/reflection>reflection</a>
<a class=tag-item href=https://wampsharp.net/tags/roadmap>roadmap</a>
<a class=tag-item href=https://wampsharp.net/tags/router>router</a>
<a class=tag-item href=https://wampsharp.net/tags/rx>rx</a>
<a class=tag-item href=https://wampsharp.net/tags/services>services</a>
<a class=tag-item href=https://wampsharp.net/tags/subscriber>subscriber</a>
<a class=tag-item href=https://wampsharp.net/tags/transports>transports</a>
<a class=tag-item href=https://wampsharp.net/tags/wamp1>wamp1</a>
<a class=tag-item href=https://wampsharp.net/tags/wampcra>wampcra</a></div></div></div></div></div><hr><div class=row><div class=col-sm-8><p class=doc-footer-em><a href=# onclick=resetSidebarPos()>Back to TOP</a></p></div></div></div><footer class=doc-footer><p class=doc-footer-em>Browse <strong><a href=https://github.com/Code-Sharp/WampSharp.net/>Repository</a></strong></p><p>Copyright (c) 2013-2020, Elad Zelingher; All rights reserved.</p><p>Powered by <strong><a href=https://github.com/progrhyme/hugo-theme-bootie-docs>Bootie Docs</a></strong> - theme for <a href=http://gohugo.io/>Hugo</a> by <a href=https://github.com/progrhyme/>progrhyme</a>.</p></footer><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-98663639-2','auto');ga('send','pageview');</script><script src=https://wampsharp.net/js/jquery.min.js></script><script src=https://wampsharp.net/js/bootstrap.min.js></script><script src=https://wampsharp.net/js/highlight.pack.js></script><script>hljs.initHighlightingOnLoad();</script><script src=https://wampsharp.net/js/ie10-viewport-bug-workaround.js></script><script src=https://wampsharp.net/js/bootie-docs.js></script><script src=https://cdn.jsdelivr.net/npm/docsearch.js@2.6.3/dist/cdn/docsearch.min.js></script><script>docsearch({apiKey:'0327efc17cad5f4c0585144de916a164',indexName:'wampsharp',inputSelector:'#as_q',debug:false,});</script></body></html>