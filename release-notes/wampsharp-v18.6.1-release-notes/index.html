<!DOCTYPE html>

<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="alternate" href="/index.xml" type="application/rss+xml" title="WampSharp">
		<link rel="icon" href="http://wampsharp.net/favicon.ico">
		<title>WampSharp v18.6.1 release notes - WampSharp</title>
		
		<link rel="stylesheet" href="http://wampsharp.net/css/highlight/github.css">
		<link rel="stylesheet" href="http://wampsharp.net/css/bootstrap.min.css">
		<link rel="stylesheet" href="http://wampsharp.net/css/bootstrap-theme.min.css">
		<link rel="stylesheet" href="http://wampsharp.net/css/theme.css">
		<link rel="stylesheet" href="http://wampsharp.net/css/bootie-docs.css">
		<link rel="stylesheet" href="http://wampsharp.net/css/site.css">
	</head>

<body role="document">

	
	<nav class="navbar navbar-inverse navbar-fixed-top">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="http://wampsharp.net/">WampSharp</a>
			</div>
			<div id="navbar" class="navbar-collapse collapse">
				<ul class="nav navbar-nav">
					<li ><a href="http://wampsharp.net/">Home</a></li>
			
			
				
					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Categories<span class="caret"></span></a>
						<ul class="dropdown-menu" role="menu">
						
							<li><a href="http://wampsharp.net/categories/authentication">Authentication</a></li>
						
							<li><a href="http://wampsharp.net/categories/callee">Callee</a></li>
						
							<li><a href="http://wampsharp.net/categories/caller">Caller</a></li>
						
							<li><a href="http://wampsharp.net/categories/client">Client</a></li>
						
							<li><a href="http://wampsharp.net/categories/getting-started">Getting-Started</a></li>
						
							<li><a href="http://wampsharp.net/categories/publisher">Publisher</a></li>
						
							<li><a href="http://wampsharp.net/categories/release-notes">Release-Notes</a></li>
						
							<li><a href="http://wampsharp.net/categories/roadmap">Roadmap</a></li>
						
							<li><a href="http://wampsharp.net/categories/router">Router</a></li>
						
							<li><a href="http://wampsharp.net/categories/subscriber">Subscriber</a></li>
						
							<li><a href="http://wampsharp.net/categories/wamp1">Wamp1</a></li>
						
						</ul>
					</li>
				
				</ul>
				
			</div>
		</div>
	</nav>

<div class="container">


<div class="row">
	<div class="col-sm-8 doc-main">
		<main role="main">
			<article>
				<a id="title"></a>
				<h1 class="doc-entry-title">WampSharp v18.6.1 release notes</h1>
				<div class="doc-entry-meta">
					<span><time datetime="2018-06-01">June 01, 2018</time></span>
				</div>
				<section>
					

<h2 id="new-features">New features</h2>

<h3 id="observeon-extension-method">ObserveOn extension method</h3>

<p>From this version, the <a href="http://wampsharp.net/wamp2/client/wampchannel/#fluent-syntax">client fluent syntax api</a> supports a new <code>ObserverOn</code> method. This method allows you to specify an <a href="http://www.introtorx.com/Content/v1.0.10621.0/15_SchedulingAndThreading.html">IScheduler</a> that WAMP messages will be observed on. This for instance allows to ensure that <a href="http://wampsharp.net/wamp2/roles/callee/reflection-based-callee/">reflection based callee</a> methods or <a href="http://wampsharp.net/wamp2/roles/subscriber/reflection-based-subscriber/">reflection based subscriber</a> event handlers are invoked on the Dispatcher thread.</p>

<p>Usage example:</p>

<pre><code class="language-csharp">IWampChannel channel =
    channelFactory.ConnectToRealm(&quot;realm1&quot;)
        .WebSocketTransport(&quot;ws://127.0.0.1:8080/ws&quot;)
        .JsonSerialization()
        .ObserveOn(DispatcherScheduler.Current)
        .Build();
</code></pre>

<h3 id="rawsocket-ssl-support">RawSocket Ssl support</h3>

<p>From this version, RawSocket Ssl security is supported.</p>

<p>The RawSocket fluent api now includes a new extension method called <code>SslConfiguration</code>, which allows you to specify the arguments sent in the <a href="https://docs.microsoft.com/en-us/dotnet/api/system.net.security.sslstream.authenticateasclientasync?view=netframework-4.7.1">AuthenticateAsClientAsync</a> method.</p>

<p>Similarly, the RawSocketTransport constructor now receives as a parameter a <code>ServerSslConfiguration</code> object, which allows you to specify the arguments sent in the <a href="https://docs.microsoft.com/en-us/dotnet/api/system.net.security.sslstream.authenticateasserverasync?view=netframework-4.7.1">AuthenticateAsServerAsync</a> method.</p>

<h3 id="asp-net-core-rawsocket-implementation">ASP.NET Core RawSocket implementation</h3>

<p>This version includes an implementation of the RawSocket protocol using the new <a href="https://www.nuget.org/packages/Microsoft.AspNetCore.Connections.Abstractions/">Microsoft.AspNetCore.Connections.Abstractions</a> package, part of <a href="https://github.com/aspnet/KestrelHttpServer/issues/1980">Project Bedrock</a>. This implementation is present in the package <a href="http://nuget.org/packages/WampSharp.AspNetCore.RawSocket">WampSharp.AspNetCore.RawSocket</a>.</p>

<p>Usage sample:</p>

<pre><code class="language-csharp">using System.Net;
using Microsoft.AspNetCore;
using Microsoft.AspNetCore.Hosting;
using WampSharp.AspNetCore.RawSocket;
using WampSharp.Binding;
using WampSharp.V2;

public class Program
{
    public static void Main(string[] args)
    {
        WampHost wampHost = new WampHost();

        JTokenJsonBinding jsonBinding = new JTokenJsonBinding();

        IWebHost host =
            WebHost.CreateDefaultBuilder(args)
                   .UseKestrel(options =&gt;
                               {
                                   options.Listen(IPAddress.Loopback, 8080,
                                                  builder =&gt;
                                                  {
                                                      // Configure RawSocket transport
                                                      wampHost
                                                          .RegisterTransport(new AspNetCoreRawSocketTransport(builder),
                                                                             jsonBinding);
                                                  });
                               })
                   .Configure(app =&gt;
                              {
                                  wampHost.Open();
                              })
                   .Build();

        host.Run();
    }
}
</code></pre>

<p>This allows you to listen to both RawSocket and WebSocket requests on the same port. For example, the following code listens both to WAMP RawSocket requests on port 8080 and to WAMP WebSocket requests on <code>ws://localhost:8080/ws/</code> (using the <a href="http://nuget.org/packages/WampSharp.AspNetCore.WebSockets.Server">WampSharp.AspNetCore.WebSockets.Server</a> package):</p>

<pre><code class="language-csharp">using System.Net;
using Microsoft.AspNetCore;
using Microsoft.AspNetCore.Builder;
using Microsoft.AspNetCore.Hosting;
using WampSharp.AspNetCore.RawSocket;
using WampSharp.AspNetCore.WebSockets.Server;
using WampSharp.Binding;
using WampSharp.V2;

public class Program
{
    public static void Main(string[] args)
    {
        WampHost wampHost = new WampHost();

        JTokenJsonBinding jsonBinding = new JTokenJsonBinding();

        IWebHost host =
            WebHost.CreateDefaultBuilder(args)
                   .UseKestrel(options =&gt;
                               {
                                   options.Listen(IPAddress.Loopback, 8080,
                                                  builder =&gt;
                                                  {
                                                      // Log all of the http bytes as they are sent and received
                                                      builder.UseConnectionLogging();

                                                      // Configure RawSocket transport
                                                      wampHost
                                                          .RegisterTransport(new AspNetCoreRawSocketTransport(builder),
                                                                             jsonBinding);
                                                  });
                               })
                   .Configure(app =&gt;
                              {
                                  app.Map(&quot;/ws&quot;,
                                          builder =&gt;
                                          {
                                              builder.UseWebSockets();

                                              // Configure WebSockets transport
                                              wampHost.RegisterTransport
                                                  (new AspNetCoreWebSocketTransport(builder),
                                                   jsonBinding);
                                          });

                                  wampHost.Open();
                              })
                   .Build();

        host.Run();
    }
}
</code></pre>

<h2 id="internal-changes">Internal changes</h2>

<ul>
<li>WampSharp.RawSocket now uses internally <a href="https://github.com/Microsoft/Microsoft.IO.RecyclableMemoryStream">Microsoft.IO.RecyclableMemoryStream</a> instead of <a href="https://www.nuget.org/packages/System.Buffers/">System.Buffers</a>, in order to manage MemoryStream lifetimes, as the previous implementation used System.Buffers incorrectly.</li>
<li>Optimizations for router-side pub/sub publications were made for RawSocket implementation. These also affect (minorly) the WampSharp.WebSockets based WebSockets implementations (i.e. ASP.NET, ASP.NET Core, Owin, HttpListener).</li>
<li>A lot of auto refactoring was done to leverage C# 6.0 and C# 7.0 features. These include expression bodied properties, <code>nameof</code> operator, readonly properties, string interpolation, pattern matching, var out, etc. This should not affect the implementation in any way.</li>
<li>Most of the dependencies were updated to latest version. As a result

<ul>
<li><a href="https://www.nuget.org/packages/WampSharp.Fleck">WampSharp.Fleck</a> and <a href="https://www.nuget.org/packages/WampSharp.Default.Router">WampSharp.Default.Router</a> are now available for .NET Standard 2.0.</li>
<li>The <a href="https://www.nuget.org/packages/System.Reactive">System.Reactive</a> package reference was updated to v4.0.0, which now consists of a single dll, instead of 5 dlls.</li>
<li>If you need support for a framework variant which is not supported by <a href="http://immo.landwerth.net/netstandard-versions/#">.NET Standard 2.0</a>, please specify it and explain why in <a href="https://github.com/Code-Sharp/WampSharp/issues/252">this thread</a>.</li>
</ul></li>
</ul>

				</section>
			</article>
		</main>
	</div> 

	

<div class="col-sm-3 col-sm-offset-1 doc-sidebar">
	<div id="sidebar">
	<div class="sidebar-module">
		<div class="sidebar-toc">
			<h4 class="sidebar-heading">Table of Contents</h4>
			<ul>
				<li><strong><a href="#title">WampSharp v18.6.1 release notes</a></strong></li>
			</ul>
			<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#new-features">New features</a>
<ul>
<li><a href="#observeon-extension-method">ObserveOn extension method</a></li>
<li><a href="#rawsocket-ssl-support">RawSocket Ssl support</a></li>
<li><a href="#asp-net-core-rawsocket-implementation">ASP.NET Core RawSocket implementation</a></li>
</ul></li>
<li><a href="#internal-changes">Internal changes</a></li>
</ul></li>
</ul>
</nav>
		</div>
	</div>
	<div class="sidebar-module">
		<h4 class="sidebar-heading">Pages in Categories</h4>
		<ul class="sidebar-category-list">
		
			<li>
				<a href="http://wampsharp.net/categories/authentication">
					<span class="doc-list-category">Authentication</span>
				</a>
				<ul>
					<li><a href="/wamp2/client/client-side-authentication/">Client-side authentication</a>
					</li>
				
					<li><a href="/wamp2/router/cookie-based-router-side-authentication/">Cookie based router-side authentication</a>
					</li>
				
					<li><a href="/wamp2/router/router-side-authentication/">Router-side authentication</a>
					</li>
				
					<li><a href="/wamp2/client/wamp-cra-client-side-authentication/">WAMP-CRA client side authentication</a>
					</li>
				
					<li><a href="/wamp2/router/wamp-cra-router-side-authentication/">WAMP-CRA router-side authentication</a>
					</li>
				
				</ul>
			</li>
		
			<li>
				<a href="http://wampsharp.net/categories/callee">
					<span class="doc-list-category">Callee</span>
				</a>
				<ul>
					<li><a href="/wamp2/roles/callee/getting-started-with-callee/">Getting started with Callee</a>
					</li>
				
					<li><a href="/wamp2/roles/callee/raw-callee/">Raw Callee</a>
					</li>
				
					<li><a href="/wamp2/roles/callee/reflection-based-callee/">Reflection-based Callee</a>
					</li>
				
				</ul>
			</li>
		
			<li>
				<a href="http://wampsharp.net/categories/caller">
					<span class="doc-list-category">Caller</span>
				</a>
				<ul>
					<li><a href="/wamp2/roles/caller/getting-started-with-caller/">Getting started with Caller</a>
					</li>
				
					<li><a href="/wamp2/roles/caller/raw-caller/">Raw Caller</a>
					</li>
				
					<li><a href="/wamp2/roles/caller/reflection-based-caller/">Reflection-based Caller</a>
					</li>
				
				</ul>
			</li>
		
			<li>
				<a href="http://wampsharp.net/categories/client">
					<span class="doc-list-category">Client</span>
				</a>
				<ul>
					<li><a href="/wamp2/router/transports/rawsocket/">RawSocket transport</a>
					</li>
				
					<li><a href="/wamp2/client/client-side-authentication/">Client-side authentication</a>
					</li>
				
					<li><a href="/wamp2/meta-api-service/">Meta-api descriptor service</a>
					</li>
				
					<li><a href="/wamp2/testament-service/">Testament service</a>
					</li>
				
					<li><a href="/wamp2/client/wamp-cra-client-side-authentication/">WAMP-CRA client side authentication</a>
					</li>
				
					<li><a href="/wamp2/client/wampchannel/">WampChannel</a>
					</li>
				
					<li><a href="/wamp2/client/wampchannelreconnector/">WampChannelReconnector</a>
					</li>
				
				</ul>
			</li>
		
			<li>
				<a href="http://wampsharp.net/categories/getting-started">
					<span class="doc-list-category">Getting-Started</span>
				</a>
				<ul>
					<li><a href="/wamp2/roles/callee/getting-started-with-callee/">Getting started with Callee</a>
					</li>
				
					<li><a href="/wamp2/roles/caller/getting-started-with-caller/">Getting started with Caller</a>
					</li>
				
					<li><a href="/wamp2/roles/publisher/getting-started-with-publisher/">Getting started with Publisher</a>
					</li>
				
					<li><a href="/wamp2/roles/subscriber/getting-started-with-subscriber/">Getting started with Subscriber</a>
					</li>
				
					<li><a href="/wamp2/getting-started-with-wampv2/">Getting started with WAMPv2</a>
					</li>
				
				</ul>
			</li>
		
			<li>
				<a href="http://wampsharp.net/categories/publisher">
					<span class="doc-list-category">Publisher</span>
				</a>
				<ul>
					<li><a href="/wamp2/roles/publisher/getting-started-with-publisher/">Getting started with Publisher</a>
					</li>
				
					<li><a href="/wamp2/roles/publisher/raw-publisher/">Raw Publisher</a>
					</li>
				
					<li><a href="/wamp2/roles/publisher/reflection-based-publisher/">Reflection-based Publisher</a>
					</li>
				
					<li><a href="/wamp2/roles/publisher/rx-based-publisher/">Rx-based Publisher</a>
					</li>
				
				</ul>
			</li>
		
			<li>
				<a href="http://wampsharp.net/categories/release-notes">
					<span class="doc-list-category">Release-Notes</span>
				</a>
				<ul>
					<li>
						<span class="active">WampSharp v18.6.1 release notes</span>
						</li>
				
					<li><a href="/release-notes/wampsharp-v1.2.6.41-beta-release-notes/">WampSharp v1.2.6.41-beta release notes</a>
					</li>
				
					<li><a href="/release-notes/wampsharp-v1.2.5.21-beta-release-notes/">WampSharp v1.2.5.21-beta release notes</a>
					</li>
				
					<li><a href="/release-notes/wampsharp-v1.2.4.18-beta-release-notes/">WampSharp v1.2.4.18-beta release notes</a>
					</li>
				
					<li><a href="/release-notes/wampsharp-v1.2.3.12-beta-release-notes/">WampSharp v1.2.3.12-beta release notes</a>
					</li>
				
					<li><a href="/release-notes/wampsharp-v1.2.2.8-beta-release-notes/">WampSharp v1.2.2.8-beta release notes</a>
					</li>
				
					<li><a href="/release-notes/wampsharp-v1.2.1.6-beta-release-notes/">WampSharp v1.2.1.6-beta release notes</a>
					</li>
				
				</ul>
			</li>
		
			<li>
				<a href="http://wampsharp.net/categories/roadmap">
					<span class="doc-list-category">Roadmap</span>
				</a>
				<ul>
					<li><a href="/roadmap/">Roadmap</a>
					</li>
				
				</ul>
			</li>
		
			<li>
				<a href="http://wampsharp.net/categories/router">
					<span class="doc-list-category">Router</span>
				</a>
				<ul>
					<li><a href="/wamp2/router/transports/rawsocket/">RawSocket transport</a>
					</li>
				
					<li><a href="/wamp2/router/transports/websocket/">WebSocket transports</a>
					</li>
				
					<li><a href="/wamp2/router/cookie-based-router-side-authentication/">Cookie based router-side authentication</a>
					</li>
				
					<li><a href="/wamp2/meta-api-service/">Meta-api descriptor service</a>
					</li>
				
					<li><a href="/wamp2/router/router-side-authentication/">Router-side authentication</a>
					</li>
				
					<li><a href="/wamp2/testament-service/">Testament service</a>
					</li>
				
					<li><a href="/wamp2/router/wamp-cra-router-side-authentication/">WAMP-CRA router-side authentication</a>
					</li>
				
					<li><a href="/wamp2/router/wamphost/">WampHost</a>
					</li>
				
				</ul>
			</li>
		
			<li>
				<a href="http://wampsharp.net/categories/subscriber">
					<span class="doc-list-category">Subscriber</span>
				</a>
				<ul>
					<li><a href="/wamp2/roles/subscriber/getting-started-with-subscriber/">Getting started with Subscriber</a>
					</li>
				
					<li><a href="/wamp2/roles/subscriber/raw-subscriber/">Raw Subscriber</a>
					</li>
				
					<li><a href="/wamp2/roles/subscriber/reflection-based-subscriber/">Reflection-based Subscriber</a>
					</li>
				
					<li><a href="/wamp2/roles/subscriber/rx-based-subscriber/">Rx-based Subscriber</a>
					</li>
				
				</ul>
			</li>
		
			<li>
				<a href="http://wampsharp.net/categories/wamp1">
					<span class="doc-list-category">Wamp1</span>
				</a>
				<ul>
					<li><a href="/wamp1/getting-started-with-wampv1/">Getting started with WAMPv1</a>
					</li>
				
					<li><a href="/wamp1/getting-started-with-wampv1-client/">Getting started with WAMPv1 client</a>
					</li>
				
					<li><a href="/wamp1/notes-for-wampv1-users/">Notes for WAMP1 users</a>
					</li>
				
					<li><a href="/wamp1/server-pubsub-hosting-wampv1/">Server PubSub hosting (WAMPv1)</a>
					</li>
				
					<li><a href="/wamp1/server-rpc-hosting-wampv1/">Server RPC hosting (WAMPv1)</a>
					</li>
				
				</ul>
			</li>
		
		</ul>
	</div>
	<div class="sidebar-module">
		<h4 class="sidebar-heading">Tags</h4>
		<div class="tag-box">
		
			<a class="tag-item" href="http://wampsharp.net/tags/authentication">authentication</a>
		
			<a class="tag-item" href="http://wampsharp.net/tags/callee">callee</a>
		
			<a class="tag-item" href="http://wampsharp.net/tags/caller">caller</a>
		
			<a class="tag-item" href="http://wampsharp.net/tags/client">client</a>
		
			<a class="tag-item" href="http://wampsharp.net/tags/publisher">publisher</a>
		
			<a class="tag-item" href="http://wampsharp.net/tags/raw-api">raw-api</a>
		
			<a class="tag-item" href="http://wampsharp.net/tags/reflection">reflection</a>
		
			<a class="tag-item" href="http://wampsharp.net/tags/roadmap">roadmap</a>
		
			<a class="tag-item" href="http://wampsharp.net/tags/router">router</a>
		
			<a class="tag-item" href="http://wampsharp.net/tags/rx">rx</a>
		
			<a class="tag-item" href="http://wampsharp.net/tags/services">services</a>
		
			<a class="tag-item" href="http://wampsharp.net/tags/subscriber">subscriber</a>
		
			<a class="tag-item" href="http://wampsharp.net/tags/transports">transports</a>
		
			<a class="tag-item" href="http://wampsharp.net/tags/wamp1">wamp1</a>
		
			<a class="tag-item" href="http://wampsharp.net/tags/wampcra">wampcra</a>
		
		</div>
	</div>
	</div>
</div>

</div> 


<hr />

<div class="row">
	<div class="col-sm-8">
		<p class="doc-footer-em"><a href="#" onclick="resetSidebarPos()">Back to TOP</a></p>
	</div>
</div>

</div> 

<footer class="doc-footer">
	<p class="doc-footer-em">Browse <strong><a href="https://github.com/Code-Sharp/WampSharp.net/">Repository</a></strong></p>
	<p>Copyright (c) 2013-2018, Elad Zelingher; All rights reserved.</p>
	<p>Powered by <strong><a href="https://github.com/progrhyme/hugo-theme-bootie-docs">Bootie Docs</a></strong> - theme for <a href="http://gohugo.io/">Hugo</a> by <a href="https://github.com/progrhyme/">progrhyme</a>.</p>
</footer>

<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-98663639-2', 'auto');
	ga('send', 'pageview');
</script>

<script src="http://wampsharp.net/js/jquery.min.js"></script>
<script src="http://wampsharp.net/js/bootstrap.min.js"></script>

<script src="http://wampsharp.net/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script src="http://wampsharp.net/js/ie10-viewport-bug-workaround.js"></script>
<script src="http://wampsharp.net/js/bootie-docs.js"></script>

</body>
</html>
