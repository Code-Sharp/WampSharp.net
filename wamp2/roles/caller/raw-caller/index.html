<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=alternate href=/index.xml type=application/rss+xml title=WampSharp><link rel=icon href=https://wampsharp.net/favicon.ico><title>Raw Caller - WampSharp</title><link rel=stylesheet href=https://wampsharp.net/css/highlight/github.css><link rel=stylesheet href=https://wampsharp.net/css/bootstrap.min.css><link rel=stylesheet href=https://wampsharp.net/css/bootstrap-theme.min.css><link rel=stylesheet href=https://wampsharp.net/css/theme.css><link rel=stylesheet href=https://wampsharp.net/css/bootie-docs.css><link rel=stylesheet href=https://wampsharp.net/css/site.css></head><body role=document><nav class="navbar navbar-inverse navbar-fixed-top"><div class=container><div class=navbar-header><button type=button class="navbar-toggle collapsed" data-toggle=collapse data-target=#navbar aria-expanded=false aria-controls=navbar>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span><span class=icon-bar></span><span class=icon-bar></span></button>
<a class=navbar-brand href=https://wampsharp.net/>WampSharp</a></div><div id=navbar class="navbar-collapse collapse"><ul class="nav navbar-nav"><li><a href=https://wampsharp.net/>Home</a></li><li class=dropdown><a href=# class=dropdown-toggle data-toggle=dropdown role=button aria-expanded=false>Categories<span class=caret></span></a><ul class=dropdown-menu role=menu><li><a href=https://wampsharp.net/categories/authentication>Authentication</a></li><li><a href=https://wampsharp.net/categories/callee>Callee</a></li><li><a href=https://wampsharp.net/categories/caller>Caller</a></li><li><a href=https://wampsharp.net/categories/client>Client</a></li><li><a href=https://wampsharp.net/categories/getting-started>Getting-Started</a></li><li><a href=https://wampsharp.net/categories/publisher>Publisher</a></li><li><a href=https://wampsharp.net/categories/release-notes>Release-Notes</a></li><li><a href=https://wampsharp.net/categories/roadmap>Roadmap</a></li><li><a href=https://wampsharp.net/categories/router>Router</a></li><li><a href=https://wampsharp.net/categories/subscriber>Subscriber</a></li><li><a href=https://wampsharp.net/categories/wamp1>Wamp1</a></li></ul></li></ul></div></div></nav><div class=container><div class=row><div class="col-sm-8 doc-main"><main role=main><article><a id=title></a><h1 class=doc-entry-title>Raw Caller</h1><div class=doc-entry-meta><span><time datetime=2017-07-30>July 30, 2017</time></span></div><section><p>The callee proxy is the easiest way to consume WAMP caller capabilities, but it is limited to C# features. In some cases you might want to handle a RESULT message differently. For these cases, the Raw callback api exists.</p><p>In order to use raw callback api from a WampSharp client, create a class implementing IWampRawRpcOperationClientCallback. This class will be notified when a result arrives.
Then create a new instance of your class, and access RpcCatalog property of WampChannel&rsquo;s RealmProxy, then call Invoke of your desired method with desired parameters.</p><p>The IWampRawRpcOperationClientCallback methods receive a IWampFormatter so you can deserialize the message parameters yourself.</p><p>Client sample code:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=color:#66d9ef>using</span> System;
<span style=color:#66d9ef>using</span> System.Collections.Generic;
<span style=color:#66d9ef>using</span> System.Threading.Tasks;
<span style=color:#66d9ef>using</span> WampSharp.Core.Serialization;
<span style=color:#66d9ef>using</span> WampSharp.V2;
<span style=color:#66d9ef>using</span> WampSharp.V2.Client;
<span style=color:#66d9ef>using</span> WampSharp.V2.Core.Contracts;
<span style=color:#66d9ef>using</span> WampSharp.V2.Rpc;

<span style=color:#66d9ef>namespace</span> MyNamespace
{
    <span style=color:#66d9ef>internal</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Program</span>
    {
        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> Main(<span style=color:#66d9ef>string</span>[] args)
        {
            <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>string</span> serverAddress = <span style=color:#e6db74>&#34;ws://127.0.0.1:8080/ws&#34;</span>;

            DefaultWampChannelFactory factory = <span style=color:#66d9ef>new</span> DefaultWampChannelFactory();
            IWampChannel channel = factory.CreateJsonChannel(serverAddress, <span style=color:#e6db74>&#34;realm1&#34;</span>);

            Task openTask = channel.Open();

            openTask.Wait(<span style=color:#ae81ff>5000</span>);

            IWampRealmProxy realmProxy = channel.RealmProxy;

            realmProxy.RpcCatalog.Invoke
                (<span style=color:#66d9ef>new</span> MyCallback(),
                 <span style=color:#66d9ef>new</span> CallOptions(),
                 <span style=color:#e6db74>&#34;com.myapp.add_complex&#34;</span>,
                 <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>object</span>[] {<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>5</span>});

            Console.ReadLine();
        }
    }

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MyCallback</span> : IWampRawRpcOperationClientCallback
    {
        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> Result&lt;TMessage&gt;(IWampFormatter&lt;TMessage&gt; formatter, ResultDetails details)
        {
            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> NotImplementedException();
        }

        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> Result&lt;TMessage&gt;(IWampFormatter&lt;TMessage&gt; formatter, ResultDetails details, TMessage[] arguments)
        {
            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> NotImplementedException();
        }

        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> Result&lt;TMessage&gt;(IWampFormatter&lt;TMessage&gt; formatter,
                                     ResultDetails details,
                                     TMessage[] arguments,
                                     IDictionary&lt;<span style=color:#66d9ef>string</span>, TMessage&gt; argumentsKeywords)
        {
            <span style=color:#66d9ef>int</span> c = formatter.Deserialize&lt;<span style=color:#66d9ef>int</span>&gt;(argumentsKeywords[<span style=color:#e6db74>&#34;c&#34;</span>]);
            <span style=color:#66d9ef>int</span> ci = formatter.Deserialize&lt;<span style=color:#66d9ef>int</span>&gt;(argumentsKeywords[<span style=color:#e6db74>&#34;ci&#34;</span>]);

            Console.WriteLine(<span style=color:#e6db74>&#34;Got result: &#34;</span> + <span style=color:#66d9ef>new</span> {c, ci});
        }

        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> Error&lt;TMessage&gt;(IWampFormatter&lt;TMessage&gt; formatter, TMessage details, <span style=color:#66d9ef>string</span> error)
        {
            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> NotImplementedException();
        }

        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> Error&lt;TMessage&gt;(IWampFormatter&lt;TMessage&gt; formatter, TMessage details, <span style=color:#66d9ef>string</span> error, TMessage[] arguments)
        {
            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> NotImplementedException();
        }

        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> Error&lt;TMessage&gt;(IWampFormatter&lt;TMessage&gt; formatter, TMessage details, <span style=color:#66d9ef>string</span> error, TMessage[] arguments,
                                    TMessage argumentsKeywords)
        {
            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> NotImplementedException();
        }
    }
}
</code></pre></div><h2 id=manual-proxy-samples>Manual proxy samples</h2><p>This sample demonstrates a manual implementation of <a href=https://wampsharp.net/wamp2/roles/caller/reflection-based-caller/>Reflection-based caller</a>.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=color:#66d9ef>using</span> System;
<span style=color:#66d9ef>using</span> System.Collections.Generic;
<span style=color:#66d9ef>using</span> System.Linq;
<span style=color:#66d9ef>using</span> System.Threading.Tasks;
<span style=color:#66d9ef>using</span> WampSharp.Core.Serialization;
<span style=color:#66d9ef>using</span> WampSharp.V2;
<span style=color:#66d9ef>using</span> WampSharp.V2.Client;
<span style=color:#66d9ef>using</span> WampSharp.V2.Core.Contracts;
<span style=color:#66d9ef>using</span> WampSharp.V2.Rpc;

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> IArgumentsService
{
<span style=color:#a6e22e>    [WampProcedure(&#34;com.arguments.ping&#34;)]</span>
    <span style=color:#66d9ef>void</span> Ping();
<span style=color:#a6e22e>
</span><span style=color:#a6e22e>    [WampProcedure(&#34;com.arguments.add2&#34;)]</span>
    <span style=color:#66d9ef>int</span> Add2(<span style=color:#66d9ef>int</span> a, <span style=color:#66d9ef>int</span> b);
<span style=color:#a6e22e>
</span><span style=color:#a6e22e>    [WampProcedure(&#34;com.arguments.stars&#34;)]</span>
    <span style=color:#66d9ef>string</span> Stars(<span style=color:#66d9ef>string</span> nick = <span style=color:#e6db74>&#34;somebody&#34;</span>, <span style=color:#66d9ef>int</span> stars = <span style=color:#ae81ff>0</span>);
<span style=color:#a6e22e>
</span><span style=color:#a6e22e>    [WampProcedure(&#34;com.arguments.orders&#34;)]</span>
    <span style=color:#66d9ef>string</span>[] Orders(<span style=color:#66d9ef>string</span> product, <span style=color:#66d9ef>int</span> limit = <span style=color:#ae81ff>5</span>);
<span style=color:#a6e22e>
</span><span style=color:#a6e22e>    [WampProcedure(&#34;com.arguments.ping&#34;)]</span>
    Task PingAsync();
<span style=color:#a6e22e>
</span><span style=color:#a6e22e>    [WampProcedure(&#34;com.arguments.add2&#34;)]</span>
    Task&lt;<span style=color:#66d9ef>int</span>&gt; Add2Async(<span style=color:#66d9ef>int</span> a, <span style=color:#66d9ef>int</span> b);
<span style=color:#a6e22e>
</span><span style=color:#a6e22e>    [WampProcedure(&#34;com.arguments.stars&#34;)]</span>
    Task&lt;<span style=color:#66d9ef>string</span>&gt; StarsAsync(<span style=color:#66d9ef>string</span> nick = <span style=color:#e6db74>&#34;somebody&#34;</span>, <span style=color:#66d9ef>int</span> stars = <span style=color:#ae81ff>0</span>);
<span style=color:#a6e22e>
</span><span style=color:#a6e22e>    [WampProcedure(&#34;com.arguments.orders&#34;)]</span>
    Task&lt;<span style=color:#66d9ef>string</span>[]&gt; OrdersAsync(<span style=color:#66d9ef>string</span> product, <span style=color:#66d9ef>int</span> limit = <span style=color:#ae81ff>5</span>);
}

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ArgumentsServiceProxy</span> : IArgumentsService
{
    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>readonly</span> IWampRpcOperationCatalogProxy mCatalogProxy;
    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>readonly</span> CallOptions mDummy = <span style=color:#66d9ef>new</span> CallOptions();

    <span style=color:#66d9ef>public</span> ArgumentsServiceProxy(IWampRpcOperationCatalogProxy catalogProxy)
    {
        mCatalogProxy = catalogProxy;
    }

    <span style=color:#66d9ef>public</span> Task PingAsync()
    {
        PingCallback callback = <span style=color:#66d9ef>new</span> PingCallback();
        mCatalogProxy.Invoke(callback, mDummy, <span style=color:#e6db74>&#34;com.arguments.ping&#34;</span>);
        <span style=color:#66d9ef>return</span> callback.Task;
    }

    <span style=color:#66d9ef>public</span> Task&lt;<span style=color:#66d9ef>int</span>&gt; Add2Async(<span style=color:#66d9ef>int</span> a, <span style=color:#66d9ef>int</span> b)
    {
        AddCallback callback = <span style=color:#66d9ef>new</span> AddCallback();
        mCatalogProxy.Invoke(callback, mDummy, <span style=color:#e6db74>&#34;com.arguments.add2&#34;</span>, <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>object</span>[] { a, b });
        <span style=color:#66d9ef>return</span> callback.Task;
    }

    <span style=color:#66d9ef>public</span> Task&lt;<span style=color:#66d9ef>string</span>&gt; StarsAsync(<span style=color:#66d9ef>string</span> nick = <span style=color:#e6db74>&#34;somebody&#34;</span>, <span style=color:#66d9ef>int</span> stars = <span style=color:#ae81ff>0</span>)
    {
        StarsCallback callback = <span style=color:#66d9ef>new</span> StarsCallback();

        mCatalogProxy.Invoke(callback, mDummy, <span style=color:#e6db74>&#34;com.arguments.stars&#34;</span>, <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>object</span>[] { nick, stars });
        <span style=color:#66d9ef>return</span> callback.Task;
    }

    <span style=color:#66d9ef>public</span> Task&lt;<span style=color:#66d9ef>string</span>[]&gt; OrdersAsync(<span style=color:#66d9ef>string</span> product, <span style=color:#66d9ef>int</span> limit = <span style=color:#ae81ff>5</span>)
    {
        OrdersCallback callback = <span style=color:#66d9ef>new</span> OrdersCallback();
        mCatalogProxy.Invoke(callback, mDummy, <span style=color:#e6db74>&#34;com.arguments.orders&#34;</span>, <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>object</span>[] { product, limit });
        <span style=color:#66d9ef>return</span> callback.Task;
    }

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> Ping()
    {
        <span style=color:#66d9ef>try</span>
        {
            <span style=color:#66d9ef>this</span>.PingAsync().Wait();
        }
        <span style=color:#66d9ef>catch</span> (AggregateException ex)
        {
            <span style=color:#66d9ef>throw</span> ex.InnerException;
        }
    }

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> Add2(<span style=color:#66d9ef>int</span> a, <span style=color:#66d9ef>int</span> b)
    {
        <span style=color:#66d9ef>try</span>
        {
            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.Add2Async(a, b).Result;
        }
        <span style=color:#66d9ef>catch</span> (AggregateException ex)
        {
            <span style=color:#66d9ef>throw</span> ex.InnerException;
        }
    }

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>string</span>[] Orders(<span style=color:#66d9ef>string</span> product, <span style=color:#66d9ef>int</span> limit = <span style=color:#ae81ff>5</span>)
    {
        <span style=color:#66d9ef>try</span>
        {
            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.OrdersAsync(product, limit).Result;
        }
        <span style=color:#66d9ef>catch</span> (AggregateException ex)
        {
            <span style=color:#66d9ef>throw</span> ex.InnerException;
        }
    }

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>string</span> Stars(<span style=color:#66d9ef>string</span> nick = <span style=color:#e6db74>&#34;somebody&#34;</span>, <span style=color:#66d9ef>int</span> stars = <span style=color:#ae81ff>0</span>)
    {
        <span style=color:#66d9ef>try</span>
        {
            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.StarsAsync(nick, stars).Result;
        }
        <span style=color:#66d9ef>catch</span> (AggregateException ex)
        {
            <span style=color:#66d9ef>throw</span> ex.InnerException;
        }
    }

    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>abstract</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Callback</span>&lt;T&gt; : IWampRawRpcOperationClientCallback
    {
        <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>readonly</span> TaskCompletionSource&lt;T&gt; mTask = <span style=color:#66d9ef>new</span> TaskCompletionSource&lt;T&gt;();

        <span style=color:#66d9ef>public</span> Task&lt;T&gt; Task
        {
            <span style=color:#66d9ef>get</span> { <span style=color:#66d9ef>return</span> mTask.Task; }
        }

        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>abstract</span> <span style=color:#66d9ef>void</span> Result&lt;TMessage&gt;(IWampFormatter&lt;TMessage&gt; formatter, ResultDetails details);

        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>abstract</span> <span style=color:#66d9ef>void</span> Result&lt;TMessage&gt;(IWampFormatter&lt;TMessage&gt; formatter, ResultDetails details, TMessage[] arguments);

        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>abstract</span> <span style=color:#66d9ef>void</span> Result&lt;TMessage&gt;(IWampFormatter&lt;TMessage&gt; formatter, ResultDetails details, TMessage[] arguments, IDictionary&lt;<span style=color:#66d9ef>string</span>, TMessage&gt; argumentsKeywords);

        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> Error&lt;TMessage&gt;(IWampFormatter&lt;TMessage&gt; formatter, TMessage details, <span style=color:#66d9ef>string</span> error)
        {
            IDictionary&lt;<span style=color:#66d9ef>string</span>, <span style=color:#66d9ef>object</span>&gt; deserializedDetails =
                formatter.Deserialize&lt;IDictionary&lt;<span style=color:#66d9ef>string</span>, <span style=color:#66d9ef>object</span>&gt;&gt;(details);

            WampException exception = <span style=color:#66d9ef>new</span> WampException
                (deserializedDetails,
                 error);

            mTask.SetException(exception);
        }

        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> Error&lt;TMessage&gt;(IWampFormatter&lt;TMessage&gt; formatter, TMessage details, <span style=color:#66d9ef>string</span> error,
                                    TMessage[] arguments)
        {
            IDictionary&lt;<span style=color:#66d9ef>string</span>, <span style=color:#66d9ef>object</span>&gt; deserializedDetails =
                formatter.Deserialize&lt;IDictionary&lt;<span style=color:#66d9ef>string</span>, <span style=color:#66d9ef>object</span>&gt;&gt;(details);

            <span style=color:#66d9ef>object</span>[] deserializedArguments = arguments.Cast&lt;<span style=color:#66d9ef>object</span>&gt;().ToArray();

            WampException exception = <span style=color:#66d9ef>new</span> WampException
                (deserializedDetails,
                 error,
                 deserializedArguments);

            mTask.SetException(exception);
        }

        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> Error&lt;TMessage&gt;(IWampFormatter&lt;TMessage&gt; formatter, TMessage details, <span style=color:#66d9ef>string</span> error,
                                    TMessage[] arguments,
                                    TMessage argumentsKeywords)
        {
            IDictionary&lt;<span style=color:#66d9ef>string</span>, <span style=color:#66d9ef>object</span>&gt; deserializedDetails =
                formatter.Deserialize&lt;IDictionary&lt;<span style=color:#66d9ef>string</span>, <span style=color:#66d9ef>object</span>&gt;&gt;(details);

            <span style=color:#66d9ef>object</span>[] deserializedArguments = arguments.Cast&lt;<span style=color:#66d9ef>object</span>&gt;().ToArray();

            IDictionary&lt;<span style=color:#66d9ef>string</span>, <span style=color:#66d9ef>object</span>&gt; deserializedArgumentsKeywords =
                formatter.Deserialize&lt;IDictionary&lt;<span style=color:#66d9ef>string</span>, <span style=color:#66d9ef>object</span>&gt;&gt;(argumentsKeywords);

            WampException exception = <span style=color:#66d9ef>new</span> WampException
                (deserializedDetails,
                 error,
                 deserializedArguments,
                 deserializedArgumentsKeywords);

            mTask.SetException(exception);
        }
    }

    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>PingCallback</span> : Callback&lt;<span style=color:#66d9ef>bool</span>&gt;
    {
        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>void</span> Result&lt;TMessage&gt;(IWampFormatter&lt;TMessage&gt; formatter, ResultDetails details)
        {
            mTask.SetResult(<span style=color:#66d9ef>true</span>);
        }

        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>void</span> Result&lt;TMessage&gt;(IWampFormatter&lt;TMessage&gt; formatter, ResultDetails details, TMessage[] arguments)
        {
            mTask.SetResult(<span style=color:#66d9ef>true</span>);
        }

        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>void</span> Result&lt;TMessage&gt;(IWampFormatter&lt;TMessage&gt; formatter, ResultDetails details, TMessage[] arguments, IDictionary&lt;<span style=color:#66d9ef>string</span>, TMessage&gt; argumentsKeywords)
        {
            mTask.SetResult(<span style=color:#66d9ef>true</span>);
        }
    }

    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AddCallback</span> : Callback&lt;<span style=color:#66d9ef>int</span>&gt;
    {
        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>void</span> Result&lt;TMessage&gt;(IWampFormatter&lt;TMessage&gt; formatter, ResultDetails details)
        {
            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> NotImplementedException();
        }

        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>void</span> Result&lt;TMessage&gt;(IWampFormatter&lt;TMessage&gt; formatter, ResultDetails details, TMessage[] arguments)
        {
            <span style=color:#66d9ef>int</span> result = formatter.Deserialize&lt;<span style=color:#66d9ef>int</span>&gt;(arguments[<span style=color:#ae81ff>0</span>]);
            mTask.SetResult(result);
        }

        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>void</span> Result&lt;TMessage&gt;(IWampFormatter&lt;TMessage&gt; formatter, ResultDetails details, TMessage[] arguments, IDictionary&lt;<span style=color:#66d9ef>string</span>, TMessage&gt; argumentsKeywords)
        {
            <span style=color:#66d9ef>int</span> result = formatter.Deserialize&lt;<span style=color:#66d9ef>int</span>&gt;(arguments[<span style=color:#ae81ff>0</span>]);
            mTask.SetResult(result);
        }
    }

    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>StarsCallback</span> : Callback&lt;<span style=color:#66d9ef>string</span>&gt;
    {
        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>void</span> Result&lt;TMessage&gt;(IWampFormatter&lt;TMessage&gt; formatter, ResultDetails details)
        {
            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> NotImplementedException();
        }

        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>void</span> Result&lt;TMessage&gt;(IWampFormatter&lt;TMessage&gt; formatter, ResultDetails details, TMessage[] arguments)
        {
            <span style=color:#66d9ef>string</span> result = formatter.Deserialize&lt;<span style=color:#66d9ef>string</span>&gt;(arguments[<span style=color:#ae81ff>0</span>]);
            mTask.SetResult(result);
        }

        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>void</span> Result&lt;TMessage&gt;(IWampFormatter&lt;TMessage&gt; formatter, ResultDetails details, TMessage[] arguments, IDictionary&lt;<span style=color:#66d9ef>string</span>, TMessage&gt; argumentsKeywords)
        {
            <span style=color:#66d9ef>string</span> result = formatter.Deserialize&lt;<span style=color:#66d9ef>string</span>&gt;(arguments[<span style=color:#ae81ff>0</span>]);
            mTask.SetResult(result);
        }
    }

    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>OrdersCallback</span> : Callback&lt;<span style=color:#66d9ef>string</span>[]&gt;
    {
        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>void</span> Result&lt;TMessage&gt;(IWampFormatter&lt;TMessage&gt; formatter, ResultDetails details)
        {
            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> NotImplementedException();
        }

        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>void</span> Result&lt;TMessage&gt;(IWampFormatter&lt;TMessage&gt; formatter, ResultDetails details, TMessage[] arguments)
        {
            <span style=color:#66d9ef>string</span>[] result =
                arguments.Select(x =&gt; formatter.Deserialize&lt;<span style=color:#66d9ef>string</span>&gt;(x))
                         .ToArray();

            mTask.SetResult(result);
        }

        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>void</span> Result&lt;TMessage&gt;(IWampFormatter&lt;TMessage&gt; formatter, ResultDetails details, TMessage[] arguments, IDictionary&lt;<span style=color:#66d9ef>string</span>, TMessage&gt; argumentsKeywords)
        {
            <span style=color:#66d9ef>string</span>[] result =
                arguments.Select(x =&gt; formatter.Deserialize&lt;<span style=color:#66d9ef>string</span>&gt;(x))
                         .ToArray();

            mTask.SetResult(result);
        }
    }
}
</code></pre></div><p>Usage:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>async</span> <span style=color:#66d9ef>static</span> Task Run()
{
    <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>string</span> serverAddress = <span style=color:#e6db74>&#34;ws://127.0.0.1:8080/ws&#34;</span>;

    DefaultWampChannelFactory factory = <span style=color:#66d9ef>new</span> DefaultWampChannelFactory();

    IWampChannel channel =
        factory.CreateJsonChannel(serverAddress, <span style=color:#e6db74>&#34;realm1&#34;</span>);

    <span style=color:#66d9ef>await</span> channel.Open();

    ArgumentsServiceProxy proxy =
        <span style=color:#66d9ef>new</span> ArgumentsServiceProxy(channel.RealmProxy.RpcCatalog);

    <span style=color:#66d9ef>int</span> nine = <span style=color:#66d9ef>await</span> proxy.Add2Async(<span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>5</span>).ConfigureAwait(<span style=color:#66d9ef>false</span>);
}
</code></pre></div></section></article></main></div><div class="col-sm-3 col-sm-offset-1 doc-sidebar"><div id=sidebar><div class=sidebar-module><div class=sidebar-toc><h4 class=sidebar-heading>Table of Contents</h4><ul><li><strong><a href=#title>Raw Caller</a></strong></li></ul><nav id=TableOfContents><ul><li><a href=#manual-proxy-samples>Manual proxy samples</a></li></ul></nav></div></div><div class=sidebar-module><h4 class=sidebar-heading>Pages in Categories</h4><ul class=sidebar-category-list><li><a href=https://wampsharp.net/categories/authentication><span class=doc-list-category>Authentication</span></a><ul><li><a href=/wamp2/client/client-side-authentication/>Client-side authentication</a></li><li><a href=/wamp2/router/cookie-based-router-side-authentication/>Cookie based router-side authentication</a></li><li><a href=/wamp2/router/router-side-authentication/>Router-side authentication</a></li><li><a href=/wamp2/client/wamp-cra-client-side-authentication/>WAMP-CRA client side authentication</a></li><li><a href=/wamp2/router/wamp-cra-router-side-authentication/>WAMP-CRA router-side authentication</a></li></ul></li><li><a href=https://wampsharp.net/categories/callee><span class=doc-list-category>Callee</span></a><ul><li><a href=/wamp2/roles/callee/getting-started-with-callee/>Getting started with Callee</a></li><li><a href=/wamp2/roles/callee/raw-callee/>Raw Callee</a></li><li><a href=/wamp2/roles/callee/reflection-based-callee/>Reflection-based Callee</a></li></ul></li><li><a href=https://wampsharp.net/categories/caller><span class=doc-list-category>Caller</span></a><ul><li><a href=/wamp2/roles/caller/getting-started-with-caller/>Getting started with Caller</a></li><li><span class=active>Raw Caller</span></li><li><a href=/wamp2/roles/caller/reflection-based-caller/>Reflection-based Caller</a></li></ul></li><li><a href=https://wampsharp.net/categories/client><span class=doc-list-category>Client</span></a><ul><li><a href=/wamp2/router/transports/rawsocket/>RawSocket transport</a></li><li><a href=/wamp2/client/client-side-authentication/>Client-side authentication</a></li><li><a href=/wamp2/meta-api-service/>Meta-api descriptor service</a></li><li><a href=/wamp2/testament-service/>Testament service</a></li><li><a href=/wamp2/client/wamp-cra-client-side-authentication/>WAMP-CRA client side authentication</a></li><li><a href=/wamp2/client/wampchannel/>WampChannel</a></li><li><a href=/wamp2/client/wampchannelreconnector/>WampChannelReconnector</a></li></ul></li><li><a href=https://wampsharp.net/categories/getting-started><span class=doc-list-category>Getting-Started</span></a><ul><li><a href=/wamp2/roles/callee/getting-started-with-callee/>Getting started with Callee</a></li><li><a href=/wamp2/roles/caller/getting-started-with-caller/>Getting started with Caller</a></li><li><a href=/wamp2/roles/publisher/getting-started-with-publisher/>Getting started with Publisher</a></li><li><a href=/wamp2/roles/subscriber/getting-started-with-subscriber/>Getting started with Subscriber</a></li><li><a href=/wamp2/getting-started-with-wampv2/>Getting started with WAMPv2</a></li></ul></li><li><a href=https://wampsharp.net/categories/publisher><span class=doc-list-category>Publisher</span></a><ul><li><a href=/wamp2/roles/publisher/getting-started-with-publisher/>Getting started with Publisher</a></li><li><a href=/wamp2/roles/publisher/raw-publisher/>Raw Publisher</a></li><li><a href=/wamp2/roles/publisher/reflection-based-publisher/>Reflection-based Publisher</a></li><li><a href=/wamp2/roles/publisher/rx-based-publisher/>Rx-based Publisher</a></li></ul></li><li><a href=https://wampsharp.net/categories/release-notes><span class=doc-list-category>Release-Notes</span></a><ul><li><a href=/release-notes/wampsharp-v20.1.1-release-notes/>WampSharp v20.1.1 release notes</a></li><li><a href=/release-notes/wampsharp-v18.6.1-release-notes/>WampSharp v18.6.1 release notes</a></li><li><a href=/release-notes/wampsharp-v1.2.6.41-beta-release-notes/>WampSharp v1.2.6.41-beta release notes</a></li><li><a href=/release-notes/wampsharp-v1.2.5.21-beta-release-notes/>WampSharp v1.2.5.21-beta release notes</a></li><li><a href=/release-notes/wampsharp-v1.2.4.18-beta-release-notes/>WampSharp v1.2.4.18-beta release notes</a></li><li><a href=/release-notes/wampsharp-v1.2.3.12-beta-release-notes/>WampSharp v1.2.3.12-beta release notes</a></li><li><a href=/release-notes/wampsharp-v1.2.2.8-beta-release-notes/>WampSharp v1.2.2.8-beta release notes</a></li><li><a href=/release-notes/wampsharp-v1.2.1.6-beta-release-notes/>WampSharp v1.2.1.6-beta release notes</a></li></ul></li><li><a href=https://wampsharp.net/categories/roadmap><span class=doc-list-category>Roadmap</span></a><ul><li><a href=/roadmap/>Roadmap</a></li></ul></li><li><a href=https://wampsharp.net/categories/router><span class=doc-list-category>Router</span></a><ul><li><a href=/wamp2/router/transports/rawsocket/>RawSocket transport</a></li><li><a href=/wamp2/router/transports/websocket/>WebSocket transports</a></li><li><a href=/wamp2/router/cookie-based-router-side-authentication/>Cookie based router-side authentication</a></li><li><a href=/wamp2/meta-api-service/>Meta-api descriptor service</a></li><li><a href=/wamp2/router/router-side-authentication/>Router-side authentication</a></li><li><a href=/wamp2/testament-service/>Testament service</a></li><li><a href=/wamp2/router/wamp-cra-router-side-authentication/>WAMP-CRA router-side authentication</a></li><li><a href=/wamp2/router/wamphost/>WampHost</a></li></ul></li><li><a href=https://wampsharp.net/categories/subscriber><span class=doc-list-category>Subscriber</span></a><ul><li><a href=/wamp2/roles/subscriber/getting-started-with-subscriber/>Getting started with Subscriber</a></li><li><a href=/wamp2/roles/subscriber/raw-subscriber/>Raw Subscriber</a></li><li><a href=/wamp2/roles/subscriber/reflection-based-subscriber/>Reflection-based Subscriber</a></li><li><a href=/wamp2/roles/subscriber/rx-based-subscriber/>Rx-based Subscriber</a></li></ul></li><li><a href=https://wampsharp.net/categories/wamp1><span class=doc-list-category>Wamp1</span></a><ul><li><a href=/wamp1/getting-started-with-wampv1/>Getting started with WAMPv1</a></li><li><a href=/wamp1/getting-started-with-wampv1-client/>Getting started with WAMPv1 client</a></li><li><a href=/wamp1/notes-for-wampv1-users/>Notes for WAMP1 users</a></li><li><a href=/wamp1/server-pubsub-hosting-wampv1/>Server PubSub hosting (WAMPv1)</a></li><li><a href=/wamp1/server-rpc-hosting-wampv1/>Server RPC hosting (WAMPv1)</a></li></ul></li></ul></div><div class=sidebar-module><h4 class=sidebar-heading>Tags</h4><div class=tag-box><a class=tag-item href=https://wampsharp.net/tags/authentication>authentication</a>
<a class=tag-item href=https://wampsharp.net/tags/callee>callee</a>
<a class=tag-item href=https://wampsharp.net/tags/caller>caller</a>
<a class=tag-item href=https://wampsharp.net/tags/client>client</a>
<a class=tag-item href=https://wampsharp.net/tags/publisher>publisher</a>
<a class=tag-item href=https://wampsharp.net/tags/raw-api>raw-api</a>
<a class=tag-item href=https://wampsharp.net/tags/reflection>reflection</a>
<a class=tag-item href=https://wampsharp.net/tags/roadmap>roadmap</a>
<a class=tag-item href=https://wampsharp.net/tags/router>router</a>
<a class=tag-item href=https://wampsharp.net/tags/rx>rx</a>
<a class=tag-item href=https://wampsharp.net/tags/services>services</a>
<a class=tag-item href=https://wampsharp.net/tags/subscriber>subscriber</a>
<a class=tag-item href=https://wampsharp.net/tags/transports>transports</a>
<a class=tag-item href=https://wampsharp.net/tags/wamp1>wamp1</a>
<a class=tag-item href=https://wampsharp.net/tags/wampcra>wampcra</a></div></div></div></div></div><hr><div class=row><div class=col-sm-8><p class=doc-footer-em><a href=# onclick=resetSidebarPos()>Back to TOP</a></p></div></div></div><footer class=doc-footer><p class=doc-footer-em>Browse <strong><a href=https://github.com/Code-Sharp/WampSharp.net/>Repository</a></strong></p><p>Copyright (c) 2013-2020, Elad Zelingher; All rights reserved.</p><p>Powered by <strong><a href=https://github.com/progrhyme/hugo-theme-bootie-docs>Bootie Docs</a></strong> - theme for <a href=http://gohugo.io/>Hugo</a> by <a href=https://github.com/progrhyme/>progrhyme</a>.</p></footer><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-98663639-2','auto');ga('send','pageview');</script><script src=https://wampsharp.net/js/jquery.min.js></script><script src=https://wampsharp.net/js/bootstrap.min.js></script><script src=https://wampsharp.net/js/highlight.pack.js></script><script>hljs.initHighlightingOnLoad();</script><script src=https://wampsharp.net/js/ie10-viewport-bug-workaround.js></script><script src=https://wampsharp.net/js/bootie-docs.js></script></body></html>